function startsWith(b,a){return(b.indexOf(a)===0)}function DomDataCollection(d){var a=this;a.config={recursion_level:1,collection_mode:"partial",functionsToExclude:[],function_list_size:1024,json_script:d?d:"json2.js"};a.emptyDomData=function(){a.dom_data={functions:{names:[],excluded:{size:0,count:0},truncated:false},inputs:[],iFrames:[],scripts:[],collection_status:DomDataCollection.NotStarted}};a.startInspection=function(){var j=false;var h=true;BrowserDetect.init();if(!(BrowserDetect.browser==="Explorer")){try{a.inspectJSFunctions();h=false}catch(k){j=j||true}}else{a.dom_data.functions=[];if(a.dom_data.functions===undefined||a.dom_data.functions.names===undefined){a.dom_data.functions={names:[],excluded:{size:0,count:0},truncated:false}}}try{a.inspectFrames();h=false}catch(k){j=j||true}try{a.inspectScripts();h=false}catch(k){j=j||true}try{a.inspectInputFields();h=false}catch(k){j=j||true}if(j){if(h){a.dom_data.collection_status=DomDataCollection.Fail}else{a.dom_data.collection_status=DomDataCollection.Partial}}else{a.dom_data.collection_status=DomDataCollection.Success}if(!(BrowserDetect.browser==="Explorer")){a.handleSizeLimit()}};a.domDataAsJSON=function(){return stripIllegalChars(JSON.stringify(a.dom_data))};a.recursiveGetAllFunctionNamesUnderElement=function(z,m,h){var y;var n;var k;var j=a.config;var w=j.recursion_level;var r=j.collection_mode;if(a.dom_data.functions===undefined||a.dom_data.functions.names===undefined){a.dom_data.functions={names:[],excluded:{size:0,count:0},truncated:false}}var l=a.dom_data.functions;var o=l.excluded;for(var v in m){try{var u=m[v];y=""+u;if(z.length>0){prefix=z+"."}else{prefix=""}n=prefix+v;if(g(u)){if(a.functionShouldBeCollected(u,v)){var s=l.names;k=s.length;s[k]=n}else{if(r=="partial"){o.size+=y.length;o.count++}}}if(h+1<w){a.recursiveGetAllFunctionNamesUnderElement(n,u,h+1)}else{l.names.sort()}}catch(q){if(!window.console){window.console={};window.console.info=c;window.console.log=c;window.console.warn=c;window.console.error=c}if(console&&console.log){console.log("error counting functions: "+q.toString())}}}};function c(){}function g(h){return typeof h=="function"}function b(h){return h.length}var f=new Hashtable();a.initFunctionsToExclude=function(){if(f){f.clear()}var j=a.config.functionsToExclude;var h=j.length;while(h--){f.put(j[h],"")}};a.functionShouldBeCollected=function e(j,h){if(a.config.collection_mode=="full"){return true}else{if(f.size()===0){a.initFunctionsToExclude()}if(f.containsKey(h)){return false}else{return true}}};a.inspectJSFunctions=function(){a.dom_data.functions=[];a.recursiveGetAllFunctionNamesUnderElement("",window,0)};a.handleSizeLimit=function(){var u=a.dom_data;var k=a.config;var j=k.function_list_size;var m=u.functions;m.names.sort();var q=JSON.stringify(u);if(j<0){j=0}var r=0;if(k.colllection_mode!="full"&&q.length>j){var o=m.names;var n=o.toString();var s=q.length-JSON.stringify(o).length+"[]".length;var l=false;var h=o.length;while(!l){if(r++==1000){l=true}lastComma=n.lastIndexOf(",");if(lastComma>=0&&h>0){quotation_marks=h*2;if(s+lastComma+quotation_marks>j){n=n.substring(0,lastComma-1);h--}else{l=true}}else{l=true}}if(h>1){m.truncated=true;m.names=m.names.slice(0,h-1);u.functions.truncated=true}else{a.emptyDomData();u=a.dom_data;u.collection_status=DomDataCollection.Partial;u.functions.truncated=true}}};a.inspectFrames=function(){a.countElements("iframe")};a.countElements=function(h){var j;var k=document.getElementsByTagName(h);if(a.dom_data.iFrames===undefined){a.dom_data.iFrames=[]}var l=a.dom_data.iFrames;var m=l.length;for(i=0;i<k.length;i++){l[m+i]=""+k[i].src}l.sort()};a.inspectScripts=function(){var h=document.getElementsByTagName("script");a.dom_data.scripts=[];for(var j=0;j<h.length;j++){a.dom_data.scripts[j]=h[j].text.length}};a.collectFields=function(l){var n=document.getElementsByTagName(l);if(a.dom_data.inputs===undefined){a.dom_data.inputs=[]}var h=a.dom_data.inputs;var o=h.length;var m=n.length;while(m--){var k=n[m];var j=k.name;var q=k.id;if(j&&j.length>0){element_name=j}else{if(q&&q.length>0){element_name=q}else{element_name="NO_NAME"}}h[o+m]=element_name}h.sort()};a.inspectInputFields=function(){a.collectFields("input");a.collectFields("textarea");a.collectFields("select");a.collectFields("button")};loadJSON=function(){if(!window.JSON){var j=document.getElementsByTagName("head")[0];var h=document.createElement("script");h.type="text/javascript";h.src=a.config.json_script;j.appendChild(h)}};a.emptyDomData();loadJSON()}DomDataCollection.Success=0;DomDataCollection.Fail=1;DomDataCollection.Partial=2;DomDataCollection.NotStarted=3;function IE_FingerPrint(){this.deviceprint_browser=function(){var c=navigator.userAgent.toLowerCase();t=c+SEP+navigator.appVersion+SEP+navigator.platform;t+=SEP+navigator.appMinorVersion+SEP+navigator.cpuClass+SEP+navigator.browserLanguage;t+=SEP+ScriptEngineBuildVersion();return t};this.deviceprint_software=function(){var g="";var d=true;try{document.body.addBehavior("#default#clientCaps");var e;var c=a.length;for(i=0;i<c;i++){e=activeXDetect(a[i]);var f=b[i];if(e){if(d===true){g+=f+PAIR+e;d=false}else{g+=SEP+f+PAIR+e}}else{g+="";d=false}}}catch(h){}return g};var b=["abk","wnt","aol","arb","chs","cht","dht","dhj","dan","dsh","heb","ie5","icw","ibe","iec","ieh","iee","jap","krn","lan","swf","shw","msn","wmp","obp","oex","net","pan","thi","tks","uni","vtc","vnm","mvm","vbs","wfd"];var a=["7790769C-0471-11D2-AF11-00C04FA35D02","89820200-ECBD-11CF-8B85-00AA005B4340","47F67D00-9E55-11D1-BAEF-00C04FC2D130","76C19B38-F0C8-11CF-87CC-0020AFEECF20","76C19B34-F0C8-11CF-87CC-0020AFEECF20","76C19B33-F0C8-11CF-87CC-0020AFEECF20","9381D8F2-0288-11D0-9501-00AA00B911A5","4F216970-C90C-11D1-B5C7-0000F8051515","283807B5-2C60-11D0-A31D-00AA00B92C03","44BBA848-CC51-11CF-AAFA-00AA00B6015C","76C19B36-F0C8-11CF-87CC-0020AFEECF20","89820200-ECBD-11CF-8B85-00AA005B4383","5A8D6EE0-3E18-11D0-821E-444553540000","630B1DA0-B465-11D1-9948-00C04F98BBC9","08B0E5C0-4FCB-11CF-AAA5-00401C608555","45EA75A0-A269-11D1-B5BF-0000F8051515","DE5AED00-A4BF-11D1-9948-00C04F98BBC9","76C19B30-F0C8-11CF-87CC-0020AFEECF20","76C19B31-F0C8-11CF-87CC-0020AFEECF20","76C19B50-F0C8-11CF-87CC-0020AFEECF20","D27CDB6E-AE6D-11CF-96B8-444553540000","2A202491-F00D-11CF-87CC-0020AFEECF20","5945C046-LE7D-LLDL-BC44-00C04FD912BE","22D6F312-B0F6-11D0-94AB-0080C74C7E95","3AF36230-A269-11D1-B5BF-0000F8051515","44BBA840-CC51-11CF-AAFA-00AA00B6015C","44BBA842-CC51-11CF-AAFA-00AA00B6015B","76C19B32-F0C8-11CF-87CC-0020AFEECF20","76C19B35-F0C8-11CF-87CC-0020AFEECF20","CC2A9BA0-3BDD-11D0-821E-444553540000","3BF42070-B3B1-11D1-B5C5-0000F8051515","10072CEC-8CC1-11D1-986E-00A0C955B42F","76C19B37-F0C8-11CF-87CC-0020AFEECF20","08B0E5C0-4FCB-11CF-AAA5-00401C608500","4F645220-306D-11D2-995D-00C04F98BBC9","73FA19D0-2D75-11D2-995D-00C04F98BBC9"]}IE_FingerPrint.prototype=new FingerPrint();function Mozilla_FingerPrint(){}Mozilla_FingerPrint.prototype=new FingerPrint();function Opera_FingerPrint(){}Opera_FingerPrint.prototype=new FingerPrint();function Timer(){this.startTime=new Date().getTime()}Timer.prototype.start=function(){this.startTime=new Date().getTime()};Timer.prototype.duration=function(){return(new Date().getTime())-this.startTime};function getRandomPort(){return Math.floor(Math.random()*60000+4000)}var ProxyCollector={};ProxyCollector.internalIP="127.0.0.1";ProxyCollector.externalIP;ProxyCollector.internalPingTime;ProxyCollector.externalPingTime;ProxyCollector.setInternalPingTime=function(a){ProxyCollector.internalPingTime=a};ProxyCollector.setExternalPingTime=function(a){ProxyCollector.externalPingTime=a};ProxyCollector.PROXY_DETECTION_TIMEOUT=5000;ProxyCollector.TIMEOUT_CHECK_FREQUENCY=1000;ProxyCollector.isTimedOut=function(b,a,c){_timer=new Timer();if((a-_timer.duration()<=0)&&(((typeof ProxyCollector.internalPingTime==="undefined")&&((new RegExp("internalPingTime")).test(b)))||((typeof ProxyCollector.externalPingTime==="undefined")&&((new RegExp("externalPingTime")).test(b))))){b.call(this,-1);c.abort()}else{if(((typeof ProxyCollector.internalPingTime==="undefined")&&((new RegExp("internalPingTime")).test(b)))||((typeof ProxyCollector.externalPingTime==="undefined")&&((new RegExp("externalPingTime")).test(b)))){setTimeout(function(){ProxyCollector.isTimedOut(b,a-(_timer.duration()+ProxyCollector.TIMEOUT_CHECK_FREQUENCY),c)},ProxyCollector.TIMEOUT_CHECK_FREQUENCY)}}};ProxyCollector.doAjax=function(g,f){var a=document.location.protocol+"//"+g+":"+getRandomPort()+"/NonExistentImage"+getRandomPort()+".gif";var e;var c;if(window.XDomainRequest){e=new window.XDomainRequest();c=new Timer();try{e.timeout=ProxyCollector.PROXY_DETECTION_TIMEOUT;e.ontimeout=function(){f.call(this,-1);e.abort()};e.onprogress=function(){f.call(this,c.duration());e.abort()};e.onerror=function(){f.call(this,c.duration());e.abort()};e.open("GET",a,true);e.send()}catch(b){ProxyCollector.doAjaxViaImage(f,a)}}else{e=new XMLHttpRequest();var d="ontimeout" in e;c=new Timer();try{e.onreadystatechange=function(){if(e.readyState==4){if(((typeof ProxyCollector.internalPingTime==="undefined")&&((new RegExp("internalPingTime")).test(f)))||((typeof ProxyCollector.externalPingTime==="undefined")&&((new RegExp("externalPingTime")).test(f)))){f.call(this,c.duration())}}};e.timeout=ProxyCollector.PROXY_DETECTION_TIMEOUT;e.ontimeout=function(){f.call(this,-1);e.abort()};e.open("GET",a,true);e.send();if(!d){ProxyCollector.isTimedOut(f,ProxyCollector.PROXY_DETECTION_TIMEOUT-c.duration(),e)}}catch(b){ProxyCollector.doAjaxViaImage(f,a)}}};ProxyCollector.doAjaxViaImage=function(d,b){var a=new Image();var c=new Timer();a.onerror=function(){d.call(this,c.duration())};a.src=b};ProxyCollector.collect=function(){ProxyCollector.doAjax(ProxyCollector.externalIP,ProxyCollector.setExternalPingTime);if(typeof XDomainRequest=="object"){if(!ProxyCollector.externalPingTime){forceIE89Synchronicity()}}else{ProxyCollector.doAjax(ProxyCollector.internalIP,ProxyCollector.setInternalPingTime)}};forceIE89Synchronicity=function(){if(!ProxyCollector.externalPingTime){setTimeout(forceIE89Synchronicity,100)}else{ProxyCollector.doAjax(ProxyCollector.internalIP,ProxyCollector.setInternalPingTime)}};ProxyCollector.isValidIPAddress=function(c){var b=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;if(b.test(c)){var d=c.split(".");if(parseInt(parseFloat(d[0]))==0){return false}for(var a=0;a<d.length;a++){if(parseInt(parseFloat(d[a]))>255){return false}}return true}else{return false}};ProxyCollector.initProxyCollection=function(){if(ProxyCollector.isValidIPAddress(ProxyCollector.externalIP)&&ProxyCollector.isValidIPAddress(ProxyCollector.internalIP)){ProxyCollector.collect()}};function BlackberryLocationCollector(){var g=this;var d=null;this.getGeolocationWatchId=function(){return d};var f=null;this.getGeolocationLastPosition=function(){return f};var c=4;this.getGeolocationStatusCode=function(){return c};var h="";this.getGeolocationErrorMessage=function(){return h};var a={aidMode:2,timeout:180,relevancy:120,expiration:48,alertDebug:false};var e=-1;var b=0;this.getInvokeCount=function(){return b};this.handleBlackBerryLocationTimeout=function(){if(e!=-1){g.stopWatch();c=3;if(b===0&&a.aidMode!==0){b++;g.startLocationWatch()}}};this.handlePosition=function(){clearTimeout(e);e=-1;var k=false;if(blackberry.location.latitude===0&&blackberry.location.longitude===0){if(a.alertDebug){alert("Got empty position")}if(f===null){c=2}}else{var m=null;if(blackberry.location.timestamp){m=getTimestampInMillis(blackberry.location.timestamp)}else{m=new Date().getTime()}var l=new Date().getTime();if((l-m)<=(a.expiration*60*60*1000)){if(f===null||m>f.timestamp){var j=f===null?0:f.timestamp;if(a.alertDebug){alert("Saved new position. New timestamp: "+m+" Old: "+j)}f={timestamp:m,coords:{latitude:blackberry.location.latitude,longitude:blackberry.location.longitude}};c=0}else{if(a.alertDebug){alert("New position is not saved. New timestamp: "+m+" Old: "+f.timestamp)}}}else{if(a.alertDebug){alert("New position is not saved. It is expired: "+((l-m)*1000*60*60)+" hours old")}}}if(f!==null){var l=new Date().getTime();k=(l-f.timestamp)<(a.relevancy*1000)}g.stopWatch();if(a.alertDebug){alert("Relevant position? "+k)}if((b===0&&a.aidMode!==0)||!k){b++;g.startLocationWatch()}};this.init=function(m,l,j,k){if(m>=0&&m<=2){a.aidMode=m}if(l!==null&&l>=90&&l<=300){a.timeout=l}if(j!==null&&j>=60&&j<=240){a.relevancy=j}if(k!==null&&k>=24&&k<=60){a.expiration=k}};this.startLocationWatch=function(){if(b===0){blackberry.location.setAidMode(0)}else{blackberry.location.setAidMode(a.aidMode)}var j=a.timeout*1000;e=setTimeout("geoLocator.handleBlackBerryLocationTimeout()",j);blackberry.location.onLocationUpdate(g.handlePosition);blackberry.location.refreshLocation();d=1;return true};this.stopWatch=function(){try{blackberry.location.removeLocationUpdate(g.handlePosition)}catch(j){}d=-2};this.generateGeolocationJSONStruct=function(){var j=null;if(f!==null){var k=convertTimestampToGMT(f.timestamp);j={GeoLocationInfo:[{Status:c,Longitude:f.coords.longitude,Latitude:f.coords.latitude,Timestamp:k}]}}else{j={GeoLocationInfo:[{Status:c}]}}return JSON.stringify(j)}}function detectFields(){var c="form";var h="input";var l=document.getElementsByTagName("form");var a=l.length;var k;var b;var f=[];f.push("url="+window.location.href);for(var e=0;e<a;e++){f.push(c+"="+l[e].name);k=l[e].getElementsByTagName("input");b=k.length;for(var d=0;d<b;d++){if(k[d].type!="hidden"){f.push(h+"="+k[d].name)}}}var g=f.join("|");return g}var SEP="|";var PAIR="=";var DEV="~";function FingerPrint(){var a="3.4.2.0-SNAPSHOT";var b=new Hashtable();b.put("npnul32","def");b.put("npqtplugin6","qt6");b.put("npqtplugin5","qt5");b.put("npqtplugin4","qt4");b.put("npqtplugin3","qt3");b.put("npqtplugin2","qt2");b.put("npqtplugin","qt1");b.put("nppdf32","pdf");b.put("NPSWF32","swf");b.put("NPJava11","j11");b.put("NPJava12","j12");b.put("NPJava13","j13");b.put("NPJava32","j32");b.put("NPJava14","j14");b.put("npoji600","j61");b.put("NPJava131_16","j16");b.put("NPOFFICE","mso");b.put("npdsplay","wpm");b.put("npwmsdrm","drm");b.put("npdrmv2","drn");b.put("nprjplug","rjl");b.put("nppl3260","rpl");b.put("nprpjplug","rpv");b.put("npchime","chm");b.put("npCortona","cor");b.put("np32dsw","dsw");b.put("np32asw","asw");this.deviceprint_version=function(){return a};this.deviceprint_browser=function(){var d=navigator.userAgent.toLowerCase();var c=d+SEP+navigator.appVersion+SEP+navigator.platform;return c};this.deviceprint_software=function(){var l="";var f=true;var k="";var h="";var d=navigator.plugins;var g=navigator.mimeTypes;if(d.length>0){var e="";var c="Plugins";var j=d.length;for(i=0;i<j;i++){plugin=d[i];e=stripFullPath(plugin.filename,c,".");if(f===true){h=b.containsKey(e);if(h){k+=b.get(e);f=false}else{k="";f=false}}else{h=b.containsKey(e);if(h){k+=SEP+b.get(e)}else{k+=""}}}l=stripIllegalChars(k)}else{if(g.length>0){h="";for(i=0;i<g.length;i++){mimeType=g[i];if(f===true){h=b.containsKey(mimeType);if(h){l+=b.get(mimeType)+PAIR+mimeType;f=false}else{l+="unknown"+PAIR+mimeType;f=false}}else{h=b.containsKey(mimeType);if(h){l+=SEP+b.get(mimeType)+PAIR+mimeType}else{k+=""}}}}}return l};this.deviceprint_display=function(){var c="";if(self.screen){c+=screen.colorDepth+SEP+screen.width+SEP+screen.height+SEP+screen.availHeight}return c};this.deviceprint_all_software=function(){var g="";var c=true;var d=navigator.plugins;var j=d.length;if(j>0){var e="";var k="";var f="";for(i=0;i<j;i++){var h=d[i];k=h.filename;k=stripFullPath(k,"Plugins",".");if(c===true){e+=k;c=false}else{e+=SEP+k}}g=stripIllegalChars(e)}return g};this.deviceprint_timezone=function(){var d=(new Date().getTimezoneOffset()/60)*(-1);var c=new Date();if(c.deviceprint_dst()){d--}else{}return d};Date.prototype.deviceprint_stdTimezoneOffset=function(){var c=new Date(this.getFullYear(),0,1);var d=new Date(this.getFullYear(),6,1);return Math.max(c.getTimezoneOffset(),d.getTimezoneOffset())};Date.prototype.deviceprint_dst=function(){return this.getTimezoneOffset()<this.deviceprint_stdTimezoneOffset()};this.deviceprint_language=function(){var d;var g=navigator.language;var c=navigator.browserLanguage;var f=navigator.systemLanguage;var e=navigator.userLanguage;if(typeof(g)!=="undefined"){d="lang"+PAIR+g+SEP}else{if(typeof(c)!=="undefined"){d="lang"+PAIR+c+SEP}else{d="lang"+PAIR+""+SEP}}if((typeof(f)!=="undefined")){d+="syslang"+PAIR+f+SEP}else{d+="syslang"+PAIR+""+SEP}if((typeof(e)!=="undefined")){d+="userlang"+PAIR+e}else{d+="userlang"+PAIR+""}return d};this.deviceprint_java=function(){var c=(navigator.javaEnabled())?1:0;return c};this.deviceprint_cookie=function(){var c=(navigator.cookieEnabled)?1:0;if(typeof navigator.cookieEnabled==="undefined"&&!c){document.cookie="testcookie";c=(document.cookie.indexOf("testcookie")!==-1)?1:0}return c};this.deviceprint_appName=function(){var c=navigator.appName;return(typeof(c)!="undefined")?c:""};this.deviceprint_appCodeName=function(){var c=navigator.appCodeName;return(typeof(c)!="undefined")?c:""};this.deviceprint_online=function(){var c=navigator.onLine;return(typeof(c)!="undefined")?c:""};this.deviceprint_opsProfile=function(){var c=navigator.opsProfile;return((typeof(c)!="undefined")&&(c!==null))?c:""};this.deviceprint_userProfile=function(){var c=navigator.userProfile;return((typeof(c)!="undefined")&&(c!==null))?c:""};this.deviceprint_screen_availWidth=function(){var c=screen.availWidth;return(typeof(c)!="undefined")?c:""};this.deviceprint_screen_pixelDepth=function(){var c=screen.pixelDepth;return(typeof(c)!="undefined")?c:""};this.deviceprint_screen_bufferDepth=function(){var c=screen.bufferDepth;return(typeof(c)!="undefined")?c:""};this.deviceprint_screen_deviceXDPI=function(){var c=screen.deviceXDPI;return(typeof(c)!="undefined")?c:""};this.deviceprint_screen_deviceYDPI=function(){var c=screen.deviceYDPI;return(typeof(c)!="undefined")?c:""};this.deviceprint_screen_logicalXDPI=function(){var c=screen.logicalXDPI;return(typeof(c)!="undefined")?c:""};this.deviceprint_screen_logicalYDPI=function(){var c=screen.logicalYDPI;return(typeof(c)!="undefined")?c:""};this.deviceprint_screen_fontSmoothingEnabled=function(){var c=screen.fontSmoothingEnabled;return(typeof(c)!="undefined")?c:""};this.deviceprint_screen_updateInterval=function(){var c=screen.updateInterval;return(typeof(c)!="undefined")?c:""};this.deviceprint_ping_in=function(){if(ProxyCollector&&ProxyCollector.internalPingTime){return ProxyCollector.internalPingTime}else{return""}};this.deviceprint_ping_ex=function(){if(ProxyCollector&&ProxyCollector.externalPingTime){return ProxyCollector.externalPingTime}else{return""}}}function urlEncode(b){var a=encodeURIComponent(b).replace(/\~/g,"%7E").replace(/\!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\'/g,"%27").replace(/\-/g,"%2D").replace(/\_/g,"%5F").replace(/\./g,"%2E");return a}function encode_deviceprint(){var a=add_deviceprint();return urlEncode(a)}function decode_deviceprint(){var a=encode_deviceprint;return decodeURIComponent(urlEncode(a))}function post_deviceprint(){document.forms[0].pm_fp.value=encode_deviceprint();return true}function post_fingerprints(a){a.deviceprint.value=encode_deviceprint()}function add_deviceprint(){BrowserDetect.init();var a;switch(BrowserDetect.browser){case"Explorer":a=new IE_FingerPrint();break;case"Firefox":a=new Mozilla_FingerPrint();break;case"Opera":a=new Opera_FingerPrint();break;default:a=new FingerPrint()}var b="version="+a.deviceprint_version()+"&pm_fpua="+a.deviceprint_browser()+"&pm_fpsc="+a.deviceprint_display()+"&pm_fpsw="+a.deviceprint_software()+"&pm_fptz="+a.deviceprint_timezone()+"&pm_fpln="+a.deviceprint_language()+"&pm_fpjv="+a.deviceprint_java()+"&pm_fpco="+a.deviceprint_cookie();b=b+"&pm_fpasw="+a.deviceprint_all_software();b=b+"&pm_fpan="+a.deviceprint_appName()+"&pm_fpacn="+a.deviceprint_appCodeName()+"&pm_fpol="+a.deviceprint_online()+"&pm_fposp="+a.deviceprint_opsProfile()+"&pm_fpup="+a.deviceprint_userProfile()+"&pm_fpsaw="+a.deviceprint_screen_availWidth()+"&pm_fpspd="+a.deviceprint_screen_pixelDepth()+"&pm_fpsbd="+a.deviceprint_screen_bufferDepth()+"&pm_fpsdx="+a.deviceprint_screen_deviceXDPI()+"&pm_fpsdy="+a.deviceprint_screen_deviceYDPI()+"&pm_fpslx="+a.deviceprint_screen_logicalXDPI()+"&pm_fpsly="+a.deviceprint_screen_logicalYDPI()+"&pm_fpsfse="+a.deviceprint_screen_fontSmoothingEnabled()+"&pm_fpsui="+a.deviceprint_screen_updateInterval();b=b+"&pm_os="+BrowserDetect.OS+"&pm_brmjv="+parseInt(BrowserDetect.version,10)+"&pm_br="+BrowserDetect.browser;b=b+"&pm_inpt="+a.deviceprint_ping_in()+"&pm_expt="+a.deviceprint_ping_ex();return b}function form_add_data(b,a,c){if(b&&b.length>0){b+="&"}else{b=""}b+=a+"="+escape(c.toString());return b}function form_add_deviceprint(b,a,c){b=form_add_data(b,a+"d",c);return b}var HTML5="HTML5";var BLACKBERRY="blackberry";var UNDEFINED="undefined";var GEO_LOCATION_DEFAULT_STRUCT='{"GeoLocationInfo":[{"Status":4}]}';var geoLocator=null;var geoLocatorStatus=false;function detectDeviceCollectionAPIMode(){if(typeof(navigator.geolocation)!=UNDEFINED){return HTML5}else{if(typeof(window.blackberry)!=UNDEFINED&&blackberry.location.GPSSupported){return BLACKBERRY}else{return UNDEFINED}}}function init(f,e,a,b,d){var c=detectDeviceCollectionAPIMode();if(c==HTML5){geoLocator=new HTML5LocationCollector();geoLocator.init(f,e,a,b);return true}else{if(c==BLACKBERRY){geoLocator=new BlackberryLocationCollector();geoLocator.init(d,e,a,b);return true}}return false}function startCollection(e,d,a,b,c){geoLocatorStatus=init(e,d,a,b,c);if(geoLocatorStatus){return geoLocator.startLocationWatch()}else{return false}}function stopCollection(){if(geoLocatorStatus){geoLocator.stopWatch()}}function getGeolocationStruct(){if(geoLocatorStatus){return geoLocator.generateGeolocationJSONStruct()}else{return GEO_LOCATION_DEFAULT_STRUCT}}function HTML5LocationCollector(){var e=this;var c=-1;this.getGeolocationWatchId=function(){return c};var d=null;this.getGeolocationLastPosition=function(){return d};var b=4;this.getGeolocationStatusCode=function(){return b};var f="";this.getGeolocationErrorMessage=function(){return f};var a={accuracy:100,timeout:180,relevancy:120,expiration:48};this.getGeolocationConfig=function(){return a};this.startLocationWatch=function(){var g={enableHighAccuracy:true,timeout:(a.timeout*1000),maximumAge:a.expiration};if(navigator.geolocation){c=navigator.geolocation.watchPosition(this.handlePosition,this.handleError,g);return true}else{b=4}return false};this.init=function(k,j,g,h){if(k!==null&&k>=0&&k<=200){a.accuracy=k}if(j!==null&&j>=90&&j<=300){a.timeout=j}if(g!==null&&g>=60&&g<=240){a.relevancy=g}if(h!==null&&h>=24&&h<=60){a.expiration=h}};this.handlePosition=function(g){var h=new Date().getTime();var j=getTimestampInMillis(g.timestamp);if((h-j)<=(a.expiration*60*60*1000)){if(d===null||g.timestamp>d.timestamp||g.coords.accuracy<d.coords.accuracy){d=g;b=0}}if(d!==null){var k=h-d.timestamp;if(k<=(a.relevancy*1000)&&d.coords.accuracy<=a.accuracy){e.stopWatch()}}};this.generateGeolocationJSONStruct=function(){var g=null;if(d!==null){var h=convertTimestampToGMT(d.timestamp);g={GeoLocationInfo:[{Status:b,Longitude:d.coords.longitude,Latitude:d.coords.latitude,Altitude:Math.round(d.coords.altitude),HorizontalAccuracy:Math.round(d.coords.accuracy),AltitudeAccuracy:Math.round(d.coords.altitudeAccuracy),Heading:Math.round(d.coords.heading),Speed:Math.round(d.coords.speed),Timestamp:h}]}}else{g={GeoLocationInfo:[{Status:b}]}}return JSON.stringify(g)};this.handleError=function(g){switch(g.code){case g.TIMEOUT:e.stopWatch();b=3;break;case g.POSITION_UNAVAILABLE:b=2;f=g.message;break;case g.PERMISSION_DENIED:b=1;break;case g.UNKNOWN_ERROR:b=2;f=g.message;break}};this.stopWatch=function(){navigator.geolocation.clearWatch(c);c=-2}}var UIEventCollector=(function(){var B=null;var o=null;var c=null;var A=null;var w=["output_size_limit"];n();k();function n(D){A={output_size_limit:1024,collection_mode:"partial"};if(D){for(p in D){if(!(p._config===undefined)){var E=false;for(var C=w.length-1;C>=0;C--){if(w[C]==p){found=true;continue}}if(!E){A[p]=D[p]}}}}c=false;o=d();B={elements:new UIElementList(),events:[],collection_status:0,toString:function(){return"RecordedData: {elements: "+this.elements+", events: "+this.events+"}"}};k()}function r(){var C=f();for(var E=0,D=C.length;E<D;E++){h(C[E])}}function f(){var G=[];var C=document.getElementsByTagName("input");for(var F=0,E=C.length;F<E;F++){var D=C[F];if(v(D)){G.push(D)}}return G}function v(C){if(C.tagName&&C.tagName.toLowerCase()=="input"){var D=C.getAttribute("type");if(D=="text"||D=="checkbox"||D=="checkbox"){return true}}return false}function d(){var D=(document.createEvent)?document.createEvent("Event"):document.createEventObject();var C=D.timeStamp||new Date();C=new Date(C);if(C.getYear()>2100){C=new Date(C/1000)}C=C.getTime();return C}function h(G){var F=null;var E=B.elements;var D=E.size();var C=b(G);if(!B.elements.containsKey(C)){F=new InteractionElement();F.id(C);F.type(y(G));F.length(G.value?G.value.length:0);E.put(F)}else{F=E.get(C)}return F}function m(E){var C=E||window.event;var H=e(C);if(v(H)){var G=h(H);G.incrementEventCount();var F=new UIEvent();F.index(G.index());F.type(a(C));var D=s(C);F.offset(D-o);B.events.push(F)}return true}function x(E){var D=E||window.event;if(u(D)){var C={target:e(D),type:"paste"};return m(C)}else{return m(D)}}function u(D){if(D.type=="keydown"){var E=D.which||D.charCode||D.keyCode;var C=(typeof KeyboardEvent!="undefined"&&E==KeyboardEvent.DOM_VK_V)||E==118||E==86;if(C&&(D.ctrlKey||D.metaKey)){return true}}return false}function e(C){return C.target?C.target:C.srcElement}function s(C){var D;if(C.timeStamp&&C.timeStamp!==0){D=C.timeStamp;if(new Date(D).getYear()>2100){D=D/1000}}else{D=new Date().getTime()}return D}function q(C){}function l(){r();var G=B.elements;for(var D=G.size();D>=1;D--){var F=G.getByIndex(D);var E=F.id();var H=document.getElementById(E);if(!H){var C=document.getElementsByName(E);if(C.length>0){H=C[0]}}if(H&&H.value){F.length(H.value.length)}}}function j(E){var C=E||window.event;var H=E.target;if(H.nodeType==1){var F=H.getElementsByTagName("form");for(var D=F.length-1;D>=0;D--){var G=F[D];G.onsubmit=recordFormSubmitEvent}}}function k(){var D=m;var C=document;if(C.addEventListener){C.addEventListener("keydown",x,false);C.addEventListener("paste",D,false);C.addEventListener("focus",D,true);C.addEventListener("blur",D,true)}else{if(C.attachEvent){C.onkeydown=x;C.onfocusin=D;C.onfocusout=D}}}function g(){return private_config}function a(C){if(C.type=="keydown"){return UIEvent.KeyDown}else{if(C.type=="submit"){return UIEvent.Submit}else{if(C.type=="paste"){return UIEvent.Paste}else{if(C.type=="focus"||C.type=="focusin"){return UIEvent.Focus}else{if(C.type=="blur"||C.type=="focusout"){return UIEvent.Blur}else{return UIEvent.Unknown}}}}}}function z(C){if(C==UIEvent.KeyDown){return"keydown"}else{if(C==UIEvent.Submit){return"submit"}else{if(C==UIEvent.Focus){return"focus"}else{if(C==UIEvent.Blur){return"blur"}else{if(C==UIEvent.Paste){return"paste"}else{return"unknown"}}}}}}function y(C){return C.nodeName+(C.type?(":"+C.type):"")}function b(C){return C.id?C.id:(C.name?C.name:C.nodeName)}return{addElement:function(C){return h(C)},getEventType:function(C){return a(C)},getEventCode:function(C){return z(C)},getRecordedData:function(){return B},getElementType:function(C){return y(C)},getElementId:function(C){return b(C)},initEventCollection:function(C){n(C)},getConfig:function(){return A},serialize:function(){l();var X=this.getRecordedData();var O=X.elements;var ac=[];for(var V=0;V<O.length;V++){ac[V]=false}var C=X.events;var L=X.collection_status;var ab=this.getConfig().collection_mode=="partial";var U=this.getConfig().output_size_limit;var H=C.length;var M="@";var aa=";";var Z=",";var T=2*M.length;var W=(""+o)+Z+(""+L);var K=1;T+=K;T+=Z.length;T+=W.length;var I="";q("serializing elements ");for(var N=O.size();N>0;N--){var Y=O.getByIndex(N);var R=Y.serialize()+aa;q("elementsStr.length: "+I.length);if(ab&&((T+I.length+R.length)>U)){c=true;break}var J=Y.type().match("INPUT:checkbox");if(J==null){if(Y.length()>0&&Y.eventCount()==0){q("collecting element without input: "+Y);I=R+I}}}T+=I.length;var E="";q("serializing events ");while(H--){var Q=C[H];var P=Q.index();var G=Q.serialize()+aa;var R=O.getByIndex(P).serialize()+aa;var D=G.length;if(!ac[P]){D+=R.length}q("eventsStr.length: "+E.length);if(ab&&((T+E.length+D)>U)){c=true;break}q("collecting event: "+Q);if(!ac[P]){I=R+I;T+=R.length;q("also adding element event: "+R)}ac[P]=true;E=G+E}if(I.length>0){I=I.substring(0,I.length-1)}if(E.length>0){E=E.substring(0,E.length-1)}var S=c?1:0;var F=I+M+E+M+S+Z+W;return F}}})();function UIEvent(){var a=(this===window)?{}:this;a.index=function(b){if(arguments.length===0){return a._index}else{a._index=arguments[0]}};a.offset=function(b){if(arguments.length===0){return a._offset}else{a._offset=arguments[0]}};a.type=function(b){if(arguments.length===0){return a._type}else{a._type=arguments[0]}};a.serialize=function(){var b=",";var c="0";return a.index()+b+a.type()+b+c};a.toString=function(){return"UIEvent: [index: "+a.index()+", type: "+a.type()+", offset: "+a.offset()+"]"}}UIEvent.Unknown=0;UIEvent.KeyDown=1;UIEvent.Submit=2;UIEvent.Focus=3;UIEvent.Blur=4;UIEvent.Paste=5;function InteractionElement(){var a=(this===window)?{}:this;a._eventCount=0;a.id=function(b){if(arguments.length===0){return a._id}else{a._id=arguments[0]}};a.index=function(b){if(arguments.length===0){return a._index}else{a._index=arguments[0]}};a.length=function(b){if(arguments.length===0){return a._length}else{a._length=arguments[0]}};a.type=function(b){if(arguments.length===0){return a._type}else{a._type=arguments[0]}};a.incrementEventCount=function(){a._eventCount++};a.eventCount=function(){return a._eventCount};a.serialize=function(){var b=",";var c=a.index();return a.index()+b+c+b+a.type()+b+a.length()};a.toString=function(){return"InteractionElement: [id: "+a.id()+", index: "+a.index()+", length: "+a.length()+", type: "+a.type()+"]"}}function UIElementList(){var a=(this===window)?{}:this;var b=new Hashtable();var c=new Hashtable();a.get=function(d){return b.get(d)};a.getByIndex=function(d){return c.get(d)};a.containsKey=function(d){return b.containsKey(d)};a.indexByKey=function(d){return get(d).index()};a.size=function(){return b.size()};a.put=function(f){var e=f.id();if(!b.containsKey(e)){b.put(e,f);var d=b.size();f.index(d);c.put(d,f)}};a.toString=function(){return"[size: "+b.size()+", names: ["+b+"], indexes: ["+c+"]]"}}function activeXDetect(a){var c=null;try{c=document.body.getComponentVersion("{"+a+"}","ComponentID")}catch(b){}return(c!==null)?c:false}function stripIllegalChars(c){t="";c=c.toLowerCase();var d=c.length;for(var a=0;a<d;a++){var b=c.charAt(a);if(b!="\n"&&b!="/"&&b!="\\"){t+=b}else{if(b=="\n"){t+="n"}}}return t}function stripFullPath(a,f,g){var d=f;var e=g;var h=a;var b=h.lastIndexOf(d);if(b>=0){filenameLen=h.length;h=h.substring(b+d.length,filenameLen)}var c=h.indexOf(e);if(c>=0){h=h.slice(0,c)}return h}var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"an unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(f){var g=f.length;for(var c=0;c<g;c++){var b=f[c];var d=b.string;var e=b.prop;var a=b.identity;this.versionSearchString=b.versionSearch||a;if(d){if(d.toLowerCase().indexOf(b.subString.toLowerCase())!==-1){return a}}else{if(e){return a}}}},searchVersion:function(b){var a=b.toLowerCase().indexOf(this.versionSearchString.toLowerCase());if(a===-1){return}var c=b.substring(a+this.versionSearchString.length);if(c.indexOf(" ")===0||c.indexOf("/")===0||c.indexOf(":")===0){c=c.substring(1)}return parseFloat(c)},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.userAgent.toLowerCase(),subString:"opera",identity:"Opera",versionSearch:"version"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"mobile safari",identity:"Mobile Safari",versionSearch:"mobile safari"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent.toLocaleLowerCase(),subString:"blackberry",identity:"BlackBerry",versionSearch:"0/"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer",versionSearch:"rv"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.userAgent,subString:"BlackBerry",identity:"BlackBerry"},{string:navigator.userAgent.toLowerCase(),subString:"android",identity:"Android"},{string:navigator.userAgent,subString:"Symbian",identity:"Symbian"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.userAgent,subString:"Windows CE",identity:"Windows CE"},{string:navigator.platform,subString:"Win",identity:"Windows"}]};function convertTimestampToGMT(b){var a=b;if(!(b instanceof Date)){a=new Date(b)}offsetFromGmt=a.getTimezoneOffset()*60000;return a.getTime()+offsetFromGmt}function getTimestampInMillis(b){var a=b;if(b instanceof Date){a=b.getTime()}return a}function debug(a){};